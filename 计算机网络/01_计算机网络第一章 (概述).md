> 引用自 

https://github.com/BloothOfYouth/Computer-Network-Notes



## 1. 因特网概述

### 1.1. 网络、互连网（互联网）和因特网

网络：网络（Network）由 **若干结点（Node）和连接这些结点的链路（Link）** 组成。

![img](./.assets/1685982900646-a1551c07-6a02-4c10-896d-8ada8018b219.png)



互连网（互联网）：多个网络通过**路由器**互连起来，这样就构成了一个覆盖范围更大的网络，即互连网（互联网）。因此，互联网又称为“网络的网络（Network of Networks）”。

![img](./.assets/1685982991138-f3da4c52-b95a-42cf-90b3-521704787305.png)



因特网：因特网（Internet）是世界上最大的互连网络（用户数以亿计，互连的网络数以百万计）。

![img](./.assets/1685983020152-5e70aa22-27ea-442c-af80-babf9f5785d1.png)





**internet与Internet的区别**

- `internet`(互联网或互连网)是一个**通用名词**，它泛指多个计算机网络互连而成的网络。在这些网络之间的通信协议可以是任意的。
- `Internet`（因特网）则是一个**专用名词**，它指当前全球最大的、开放的、由众多网络互连而成的特定计算机网络，它采用TCP/IP协议族作为通信的规则，其前身是美国的ARPANET。

任意把几个计算机网络互连起来（不管采用什么协议），并能够相互通信，这样构成的是一个互连网(internet) ，而不是互联网(Internet)。



![img](./.assets/1685983113462-f97dc39f-07d5-4660-990a-2c9477301b39.png)



### 1.2. 因特网发展的三个阶段

![img](./.assets/1685983149373-45e085dd-8464-492f-81da-e8747af09fad.png)



因特网服务提供者`ISP`(Internet Service Provider)

![img](./.assets/1685983178850-d54d695f-99a0-44ab-b7b6-0515f9e038ba.png)





普通用户是如何接入到因特网的呢？

答：**通过**`**ISP**`**接入因特网**

- `ISP`可以从因特网管理机构申请到成块的`IP`地址，同时拥有通信线路以及路由器等联网设备。任何机构和个人只需缴纳费用，就可从ISP的得到所需要的`IP`地址。
- 因为因特网上的主机都必须有`IP`地址才能进行通信，这样就可以通过该`ISP`接入到因特网



中国的三大`ISP`：中国电信，中国联通和中国移动

![img](./.assets/1685983313952-75e8c577-5492-4fcf-9d07-d43495c1fbc4.png)



基于`ISP`的三层结构的因特网

![img](./.assets/1685983339939-ace14ced-1812-46ab-9495-6557182d5096.png)



一旦某个用户能够接入到因特网，那么他也可以成为一个`ISP`，所需要做的就是购买一些如调制解调器或路由器这样的设备，让其他用户可以和他相连 . 



### 1.3. 因特网的标准化工作

- 因特网的标准化工作对因特网的发展起到了非常重要的作用。
- 因特网在指定其标准上的一个很大的特点是面向公众。

- - 因特网所有的`**RFC**`(Request For Comments)技术文档都可从因特网上免费下载；
  - 任何人都可以随时用电子邮件发表对某个文档的意见或建议。

- 因特网协会ISOC是一个国际性组织，它负责对因特网进行全面管理，以及在世界范围内促进其发展和使用。

- - 因特网体系结构委员会IAB，负责管理因特网有关协议的开发；
  - 因特网工程部IETF，负责研究中短期工程问题，主要针对协议的开发和标准化；
  - 因特网研究部IRTF，从事理论方面的研究和开发一些需要长期考虑的问题。

![img](./.assets/1685983472175-534b8d26-401b-4e85-970c-03feb07cc2ec.png)

制订因特网的正式标准要经过一下4个阶段：

1. 因特网草案（在这个阶段还不是RFC文档）
2. 建议标准（从这个阶段开始就成为RFC文档）
3. 草案标准
4. 因特网标准



### 1.4. 因特网的组成

- 边缘部分

- - 由所有连接在因特网上的**主机**组成（台式电脑，大型服务器，笔记本电脑，平板，智能手机等）。这部分是**用户直接使用**的，用来进行**通信**（传送数据、音频或视频）和**资源共享**。

- 核心部分

- - 由**大量网络**和连接这些网络的**路由器**组成。这部分是**为边缘部分提供服务**的（提供连通性和交换）。

![img](./.assets/1685983567301-2b8b43d8-019f-459a-a971-887a078aa3b6.png)



路由器是一种专用计算机，但我们不称它为主机，路由器是实现分组交换的关键构建，其任务是转发收到的分组，这是网络核心最重要的部分。

处在互联网边缘的部分就是连接在互联网上的所有的主机。这些主机又称为**端系统 (end system)**。



**端系统在功能上可能有很大的差别：**

1. 小的端系统可以是一台普通个人电脑，具有上网功能的智能手机，甚至是一个很小的网络摄像头。
2. 大的端系统则可以是一台非常昂贵的大型计算机。
3. 端系统的拥有者可以是个人，也可以是单位（如学校、企业、政府机关等），当然也可以是某个ISP。



### 1.5. 补充

**端系统之间通信的含义**

“主机 A 和主机 B 进行通信”实际上是指：“运行在主机 A 上的某个程序和运行在主机 B 上的另一个程序进行通信”。**即“主机** **A** **的某个进程和主机** **B** **上的另一个进程进行通信”。简称为“计算机之间通信”。**

端系统之间的通信方式通常可划分为两大类：

![img](./.assets/1685983678016-c8a3f0fb-4aa9-4c8c-b808-9e4537b4b281.png)



1. **客户-服务器方式：**

- 客户 (client) 和服务器 (server) 都是指通信中所涉及的两个应用进程。
- 客户 - 服务器方式所描述的是进程之间服务和被服务的关系。
- 客户是服务的请求方，服务器是服务的提供方。



服务请求方和服务提供方都要使用网络核心部分所提供的服务。



1. **对等连接方式：**

- **对等连接** (peer-to-peer，简写为 **P2P** ) 是指两个主机在通信时并不区分哪一个是服务请求方还是服务提供方。
- 只要两个主机都运行了对等连接软件 ( P2P 软件) ，它们就可以进行**平等的、对等连接通信**。
- 双方都可以下载对方已经存储在硬盘中的共享文档。



## 2. 三种交换方式

网络核心部分是互联网中最复杂的部分。

网络中的核心部分要向网络边缘中的大量主机提供连通性，使边缘部分中的任何一个主机都能够向其他主机通信（即传送或接收各种形式的数据）。

在网络核心部分起特殊作用的是**路由器**(router)。

**路由器**是实现**分组交换** (packet switching) 的关键构件，其任务是**转发**收到的分组，这是网络核心部分最重要的功能。

### 2.1. 电路交换（Circuit Switching）

![img](./.assets/1685983799121-2c4d1815-8614-4fa2-a92d-102bdbb423b0.png)



传统两两相连的方式，当电话数量很多时，电话线也很多，就很不方便

所以要使得每一部电话能够很方便地和另一部电话进行通信，就应该使用一个**中间设备**将这些电话连接起来，这个中间设备就是**电话交换机**

![img](./.assets/1685983823214-29314d52-5416-4db6-8fc8-75e0d86c3d49.png)

- 电话交换机接通电话线的方式称为电路交换；
- 从通信资源的分配角度来看，交换（Switching）就是按照某种方式动态地分配传输线路的资源；
- 电路交换的三个步骤：

1. 1. **建立连接**（分配通信资源）
   2. **通话**（一直占用通信资源）
   3. **释放连接**（归还通信资源）

![img](./.assets/1685983879373-2adcf781-4071-4c0b-a643-23d6037d5101.png)



当使用电路交换来传送计算机数据时，其线路的传输效率往往很低。

这是因为计算机数据是突发式地出现在传输线路上的。

所以计算机通常采用的是**分组交换**，而不是线路交换



### 2.2. 分组交换（Packet Switching）

![img](./.assets/1685983911703-7760eee4-82f9-416b-8b51-c9f328efcbb5.png)



通常我们把表示**该消息的整块数据**成为一个**报文**。

在发送报文之前，先把较长的报文划分成一个个更小的**等长数据段**，在每一个数据段前面。加上一些由必**要的控制信息组成的首部**后，就构成一个分组，也可简称为“包”，相应地，首部也可称为“包头”。

首部包含了**分组的目的地址**

分组从源主机到目的主机，可走不同的路径。



**发送方**

- 构造分组
- 发送分组

**路由器**

- 缓存分组
- 转发分组
- 简称为“分组转发”



在路由器中的输入和输出端口之间没有直接连线。

路由器处理分组的过程是：

1. 把收到的分组先**放入缓存（暂时存储）；**
2. **查找转发表**，找出到某个目的地址应从哪个端口转发；
3. 把分组送到适当的端口**转发**出去。



**接收方**

- 接收分组
- 还原报文

### 2.3. 报文交换（Message Switching）

报文交换中的交换结点也采用存储转发方式，但报文交换对报文的大小没有限制，这就要求交换结点需要**较大的缓存空间**。报文交换主要用于早期的电报通信网，现在较少使用，**通常被较先进的分组交换方式所取代**。



### 2.4. 三种交换方式的对比

假设A，B，C，D是分组传输路径所要经过的4个结点交换机，纵坐标为时间


 ![img](./.assets/1685984111556-f5dafe4f-7c0c-45c4-80f9-e1ce6bc58950.png)



分析：

**电路交换：**

- 通信之前首先要建立连接；连接建立好之后，就可以使用已建立好的连接进行数据传送；数据传送后，需释放连接，以归还之前建立连接所占用的通信线路资源。
- 一旦建立连接，中间的各结点交换机就是直通形式的，比特流可以直达终点；

**报文交换：**

- 可以随时发送报文，而不需要事先建立连接；整个报文先传送到相邻结点交换机，全部存储下来后进行查表转发，转发到下一个结点交换机。
- 整个报文需要在各结点交换机上进行存储转发，由于不限制报文大小，因此需要各结点交换机都具有较大的缓存空间。

**分组交换：**

- 可以随时发送分组，而不需要事先建立连接。构成原始报文的一个个分组，依次在各结点交换机上存储转发。各结点交换机在发送分组的同时，还缓存接收到的分组。
- 构成原始报文的一个个分组，在各结点交换机上进行存储转发，相比报文交换，减少了转发时延，还可以避免过长的报文长时间占用链路，同时也有利于进行差错控制。


 ![img](./.assets/1685984162363-486c3d4d-906a-4888-8c0d-dfc8c5b03e6a.png)![img](./.assets/1685984211774-d4abb093-240d-4a31-b8df-5b7c9cbbdd1c.png)![img](./.assets/1685984177578-abb1f406-7515-4ebf-99f7-6d9201443a4e.png)



## 3. 计算机网络的定义和分类

### 3.1. 计算机网络的定义

- 计算机网络的精确定义并未统一
- 计算机网络的最简单的定义是：一些**互**相**连**接的、**自治**的计算机的**集合**。

- - **互连**：是指计算机之间可以通过有线或无线的方式进行数据通信；
  - **自治**：是指独立的计算机，他有自己的硬件和软件，可以单独运行使用；
  - **集合**：是指至少需要两台计算机；

- 计算机网络的较好的定义是：计算机网络主要是由一些**通用的，可编程的硬件（一定包含有中央处理机CPU）互连**而成的，而这些硬件并非专门用来实现某一特定目的（例如，传送数据或视频信号）。这些可编程的硬件能够用来**传送多种不同类型的数据**，并能**支持广泛的和日益增长的应用**。

- - 计算机网络所连接的硬件，并不限于一般的计算机，而是包括了智能手机等智能硬件。
  - 计算机网络并非专门用来传送数据，而是能够支持很多种的应用（包括今后可能出现的各种应用）。

### 3.2. 计算机网络的分类

**按交换技术分类：**

- 电路交换网络
- 报文交换网络
- 分组交换网络

**按使用者分类：**

- 公用网
- 专用网

**按传输介质分类：**

- 有线网络
- 无线网络

**按覆盖范围分类：**

- 广域网`WAN`（Wide Area Network）

作用范围通常为几十到几千公里，因而有时也称为远程网（long haul network）。广域网是互联网的核心部分，其任务是通过长距离（例如，跨越不同的国家）运送主机所发送的数据。

- 城域网`MAN`

作用范围一般是一个城市，可跨越几个街区甚至整个城市

- 局域网`LAN`

一般用微型计算机或工作站通过高速通信线路相连（速率通常在 10 Mbit/s 以上），但地理上范围较小（1 km 左右）

- 个域网`PAN`

就是在个人工作的地方把个人使用的电子设备用无线技术连接起来的网络。

**按拓扑结构分类：**

- 总线型网络![img](./.assets/1685984330010-2c6f7f77-e0bc-4930-a0fa-ded1c23d8622.png)
- 星型网络![img](./.assets/1685984344015-16ee9749-a90a-4164-b710-29d58432ea6c.png)
- 环形网络![img](./.assets/1685984355146-6d458146-75f0-407e-955f-6cb0207a992a.png)
- 网状型网络![img](./.assets/1685984371966-7e19e730-5620-4386-b286-525f62ba9361.png)





## 4. 计算机网络的性能指标



### 4.1. 速率

![img](./.assets/1685984456940-a34237a9-f4aa-4e26-a1a7-d42126cc1f54.png)![img](./.assets/1685984442673-13f8c612-e9b3-45f0-b210-347128a67a69.png)





例题

![img](./.assets/1685984468340-7433f595-eb31-4de6-aebc-66da32dfdedf.png)



### 4.2. 带宽

![img](./.assets/1685984496577-37d1799a-cfa5-4545-996e-169d43882554.png)![img](./.assets/1685984502069-78c25af0-fb15-4d18-87b2-2c3372dd36cd.png)



意为速率上限



![img](./.assets/1685984526347-4cd65925-f59e-4021-8e29-f0c724f3a68f.png)





### 4.3. 吞吐量

![img](./.assets/1685984551288-b476f71a-390b-4203-82a9-e7f114b51a6d.png)



带宽1 Gb/s的以太网，代表其额定速率是1 Gb/s，这个数值也是该以太网的**吞吐量的绝对上限值**。因此，对于带宽1 Gb/s的以太网，可能实际吞吐量只有 700 Mb/s，甚至更低。

注意：吞吐量还可以用每秒传送的字节数或帧数表示



### 4.4. 时延

![img](./.assets/1685984716939-bfa261e0-c067-407f-89be-143c2562b213.png)

时延时指数据（一个报文或分组，甚至比特）从网络（或链路）的一端传送到另一端所需的时间。

网络时延由几部分组成：

- **发送时延**

主机或路由器发送数据帧所需要的时间，也就是从发送数据帧的第一个比特算起，到该帧的最后一个比特发送完毕所需的时间。

- **传播时延**

电磁波在信道中传播一定的距离需要花费的时间。

- **处理时延**

主机或路由器在收到分组时要花费一定时间进行处理

- **排队时延**

分组在进过网络传输时，要经过许多路由器。但分组在进入路由器后要先在输入队列中排队等待处理。



有时会把排队时延看成**处理时延 一部分**

**总时延 = 发送时延 + 传播时延 + 处理时延 （处理时延 + 排队时延）**



![img](./.assets/1685984751030-db32a20d-a681-4829-a965-94bb97c2c397.png)

发送速率受木桶效应影响



计算时延

![img](./.assets/1685984831590-a6229775-2b99-4abf-bf30-e0cfba48433d.png)



![img](./.assets/1685984863270-c03a5482-8e71-4831-b776-2a80fb743e66.png)![img](./.assets/1685984873030-329b7f02-967c-441f-95ef-64f847f823a7.png)





当处理时延忽略不计时，发送时延 和 传播时延谁占主导，要**具体情况具体分析**



### 4.5. 时延带宽积

- 时延带宽积 = 传播时延 * 带宽

![img](./.assets/1685984952778-5a7c9f03-1b69-40d7-b42b-ad0139468f3a.png)

### 4.6. 往返时间

互联网上的信息不仅仅单方向传输而是双向交互的。因此，我们有时很需要知道**双向交互一次所需的时间**。
 ![img](./.assets/1685984980217-fb90a221-b5ea-4062-b85f-c138067eaf58.png)



### 4.7. 利用率

利用率有**信道利用率**和**网络利用率**两种。

![img](./.assets/1685985099057-f45cfa2d-8a26-4df2-bf12-907ffbd6af23.png)

信道利用率要控制, 不能高不能低





### 4.8. 丢包率

![img](./.assets/1685985161432-fb1e7625-e5fc-4984-bd2f-79476659cbd3.png)





## 5. 计算机网络体系结构





























![img](./.assets/1685956461549-0952ae38-7ecf-43bc-88ae-b9d098825ed2.png)



![img](./.assets/1685958682635-db4f9f3d-9d8a-4d4c-b8db-f7a56021cf9d.png)